[tox]
envlist = full, light, gsas, docs
;skipsdist = True

[testenv]
basepython = python3.7
deps =
    pytest
    -rrequirements.txt
changedir = tests

[testenv:full]
description = Full configuration including all external dependencies
extras = full
# pytest -s allows interactive prompts to be run before executing the tests
#   Required for providing GSAS2 installation directory
commands = pytest -s

[testenv:light]
description = Light configuration, excluding all external dependencies
commands = pytest --ignore='GSAS2'

[testenv:gsas]
description = GSAS2 configuration, light + gsas2 features
extras = gsas2
commands = pytest 'GSAS2' -s

[testenv:docs]
description = Build documentation
extras = full
deps = sphinx
changedir = docs
commands = sphinx-build "source" "build" -a